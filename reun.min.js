!function(){"use strict";function moduleUrl(module,opt){var path=opt.uri||"";if("reun"===module.slice(0,4))return"reun";if(module.startsWith("https:")||module.startsWith("http:"))return module;for(path=path.replace(/[?#].*/,""),path=module.startsWith(".")?path.replace(/[\/][^\/]*$/,"/"):"https://unpkg.com/",path+=module;-1!==path.indexOf("/./");)path=path.replace("/./","/");var prevPath;do prevPath=path,path=path.replace(/[\/][^\/]*[\/][.][.][\/]/g,"/");while(path!==prevPath);return path}function do_eval(fn,opt){return opt=opt||{},"string"==typeof fn&&(fn=stringToFunction(fn,opt)),executeModule(fn,opt)}function executeModule(fn,opt){opt.uri=opt.uri||"";var require=(name,opt)=>reun_require(name,opt,module),module={require:require,uri:opt.uri,id:opt.uri.replace("https://unpkg.com/","").replace(/@[^\/]*/,""),exports:{}};return opt.main&&(require.main=module),rerunModule(fn,module)}function rerunModule(fn,module){var result;try{fn(module.require,module.exports,module),result=module.exports}catch(e){if(e.constructor!==RequireError)throw e;return da.call(da.nid,"da:GET",e.url)["catch"]((()=>{throw new Error('require could not load "'+e.url+'" Possibly module incompatible with http://reun.solsort.com/')})).then((moduleSrc=>executeModule(stringToFunction(moduleSrc,{uri:e.url}),{uri:e.url}))).then((exports=>assignModule(e.url,exports))).then((()=>rerunModule(fn,module)))}return Promise.resolve(result)}function assignModule(uri,exports){modules[uri]=exports,exports.meta&&exports.meta.id&&(modules[exports.meta.id]=exports);var name=uri.replace("https://unpkg.com/","").replace(/[@\/].*/,"");modules[name]||(modules[name]=exports)}function reun_require(name,opt,parentModule){if(modules[name])return modules[name];var url=moduleUrl(name,parentModule);if(!modules[url])throw new RequireError(name,url);return modules[url]}function stringToFunction(src,opt){var wrappedSrc="(function(require,exports,module){"+src+"})//# sourceURL="+opt.uri;return eval(wrappedSrc)}function RequireError(module,url){this.module=module,this.url=url}var da="undefined"!=typeof direape?direape:require("direape");da.testSuite("reun");var reun=da.global.reun||{},modules={reun:reun,direape:da},runQueue=new Promise((resolve=>da.ready((()=>resolve()))));reun.eval=((fn,opt)=>{return runQueue=runQueue.then(function(){return do_eval(fn,opt)})["catch"]((e=>da.nextTick((()=>{throw e}))))}),da.handle("reun:eval",reun.eval),reun.require=((name,opt)=>do_eval("module.exports = require('"+name+"');",Object.assign({uri:da.global.location&&da.global.location.href||"./"},opt))),da.handle("reun:require",reun.require),RequireError.prototype.toString=function(){return"RequireError:"+this.module+" url:"+this.url},da.ready((()=>{(da.isNodeJs()&&require.main===module&&"test"===process.argv[2]||da.global.location&&"localhost"===da.global.location.hostname)&&da.runTests("reun").then((()=>da.isNodeJs()&&process.exit(0)))["catch"]((()=>da.isNodeJs()&&process.exit(1)))})),"object"==typeof module?module.exports=reun:self.reun=reun}();
